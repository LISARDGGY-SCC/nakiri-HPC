echo "blacklist nouveau" | sudo tee /etc/modprobe.d/blacklist-nouveau.conf && echo "options nouveau modeset=0" | sudo tee -a /etc/modprobe.d/blacklist-nouveau.conf && sudo update-initramfs -u && (sudo modprobe -r nouveau || echo "nouveau module not loaded or could not be removed.") && sudo apt-get update && sudo DEBIAN_FRONTEND=noninteractive apt-get install -y libc-dev linux-headers-$(uname -r) ca-certificates curl gnupg2 && wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.1-1_all.deb && sudo dpkg -i cuda-keyring_1.1-1_all.deb && rm cuda-keyring_1.1-1_all.deb && curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list && sudo apt-get update && sudo DEBIAN_FRONTEND=noninteractive apt-get install -y nvidia-driver-580 cuda-runtime-13.0 cuda-compiler-13.0 cuda-libraries-dev-13.0 openmpi-bin libopenmpi-dev && curl -fsSL get.docker.com | bash && sudo DEBIAN_FRONTEND=noninteractive apt-get install -y nvidia-container-toolkit=1.18.0-1 nvidia-container-toolkit-base=1.18.0-1 libnvidia-container-tools=1.18.0-1 libnvidia-container1=1.18.0-1 && sudo groupadd docker && sudo usermod -aG docker "${SUDO_USER:-$(whoami)}" && echo 'export PATH=/usr/local/cuda-13.0/bin${PATH:+:${PATH}}' >> ~/.bashrc && echo 'export LD_LIBRARY_PATH=/usr/local/cuda-13.0/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}' >> ~/.bashrc